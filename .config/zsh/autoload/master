#! /usr/bin/env zsh

[ -d .git ] || git rev-parse --git-dir > /dev/null 2>&1
if (( $status )); then
  printf "Not in a git repository.\n"
  return 128
fi

GIT_ROOT=$(git symbolic-ref refs/remotes/origin/HEAD | sed 's@^refs/remotes/origin/@@')
echo_run git checkout $GIT_ROOT
echo_run git fetch -p
echo_run git merge --ff-only $(git symbolic-ref refs/remotes/origin/HEAD)
