#!/usr/bin/env bash

{{- if env "GITPOD_WORKSPACE_ID" }}
{{ output "cat" "/var/gitpod/.bashrc-prepend" }}
{{- end }}

if [ -z "$ENV" ]; then
  # If ~/.bash_profile wasn't sourced then source it
  source "${HOME}/.bash_profile"
  return $?
fi

source "${HOME}/.shinit"

if [[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]]; then
  . "/usr/local/etc/profile.d/bash_completion.sh"
fi

for dir in "$HOME"/.config/sh/*/; do
  [ -d "$dir" ] || continue

  # shellcheck disable=SC1090
  [ -r "${dir}init.bash" ] && . "${dir}init.bash"
done

{{- if env "GITPOD_WORKSPACE_ID" -}}
{{ output "cat" "/var/gitpod/.bashrc-append" }}
{{ end }}
