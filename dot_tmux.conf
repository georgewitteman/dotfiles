# reload config file (change file location to your the tmux.conf you want to use)
bind-key r source-file ~/.tmux.conf\; display-message 'Sourced ~/.tmux.conf!'

# Start NON-LOGIN interactive shells
set -g default-command "${SHELL} -i"

# Used to make colors and italics work in vim
# https://github.com/neovim/neovim/wiki/FAQ#colors-arent-displayed-correctly
set -g default-terminal "tmux"
# tmux must be told that the terminal outside supports RGB colour. This is done
# by specifying the RGB or Tc terminfo(5) flags. RGB is the official flag, Tc
# is a tmux extension.
set -ga terminal-overrides ",alacritty:RGB"

set-option -g status-bg 'black'
set-option -g status-fg 'white'

set-option -g status-justify left
set-option -g status-left ''

set-window-option -g window-status-format ' #I:#W#F '
set-window-option -g window-status-style "bg=black,fg=white"
set-window-option -g window-status-current-format ' #I:#W#F '
set-window-option -g window-status-current-style "bg=white,fg=black"
set-window-option -g window-status-separator ''
set-option -g status-right "#{?client_prefix,#[fg=blue]^B,#{?pane_in_mode,#[fg=yellow]#[bold]Copy,}}#[default] #[bg=black,fg=white]#S #[bg=white,fg=black] %a %b %-d %-l:%M %p "

# Turn on mouse mode
# set-option -g mouse on
set-option -g mouse off

# Disable "release mouse drag to copy and exit copy-mode"
# (https://github.com/tmux/tmux/issues/140). NOTE: Use <Shift> to have tmux
# ignore the mouse. This enables clicking links.
unbind-key -T copy-mode-vi MouseDragEnd1Pane

# Since MouseDragEnd1Pane neither exit copy-mode nor clear selection now, let
# single click do selection clearing for us.
bind-key -T copy-mode-vi MouseDown1Pane select-pane\; send-keys -X clear-selection

# This line changes the default binding of MouseDrag1Pane, the only difference
# is that we use `copy-mode -eM` instead of `copy-mode -M`, so that
# WheelDownPane can trigger copy-mode to exit when copy-mode is entered by
# MouseDrag1Pane
bind -n MouseDrag1Pane if -Ft= '#{mouse_any_flag}' 'if -Ft= \"#{pane_in_mode}\" \"copy-mode -eM\" \"send-keys -M\"' 'copy-mode -eM'

# Fix the amount of time it takes before ESC is registered (mostly for vim)
set-option -s escape-time 0

# Larger scrollback buffer
set-option -g history-limit 50000

# Vim mode
set-window-option -g mode-keys vi

# More vim like navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Rebind C-l for clear screen to Prefix + C-l
bind C-l send-keys 'C-l'

# a for alternate instead of l for last
bind a select-window -l

# Resize panes
bind-key -n M-h resize-pane -L 5
bind-key -n M-j resize-pane -D 5
bind-key -n M-k resize-pane -U 5
bind-key -n M-l resize-pane -R 5

# When creating a new window cd to the directory of the previous window
bind-key "c" new-window -c "#{pane_current_path}"

# Kill session (after confirmation)
bind X confirm-before kill-session

# Move windows/panes around
bind-key -r "<" swap-window -t -1\; select-window -t -1
bind-key -r ">" swap-window -t +1\; select-window -t +1
bind-key H swap-pane -s {left-of}
bind-key J swap-pane -s {down-of}
bind-key K swap-pane -s {up-of}
bind-key L swap-pane -s {right-of}

# Go to next and previous window (same as default except can repeat)
bind-key -r n select-window -n
bind-key -r p select-window -p

# Copy & paste
bind P paste-buffer
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle # In addition to C-v

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when a window is closed
set -g renumber-windows on
