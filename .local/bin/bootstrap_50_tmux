#!/usr/bin/env zsh

set -e
source "$HOME/.zshrc"

if (( $+commands[tmux] )); then
  echo_info "Installing tmux terminfo file"
  echo_run tic -x $XDG_CONFIG_HOME/tmux/tmux.terminfo

  echo_info "Installing, updating, and cleaning tmux plugins"

  if [ ! -d "${XDG_CONFIG_HOME:-$HOME/.config}/tmux/tpm" ]; then
    echo_run git clone https://github.com/tmux-plugins/tpm \
      "${XDG_CONFIG_HOME:-$HOME/.config}/tmux/tpm"
  fi

  echo_run ${XDG_CONFIG_HOME:-$HOME/.config}/tmux/tpm/bin/install_plugins
  echo_run ${XDG_CONFIG_HOME:-$HOME/.config}/tmux/tpm/bin/update_plugins all
  echo_run ${XDG_CONFIG_HOME:-$HOME/.config}/tmux/tpm/bin/clean_plugins
else
  echo_warn "tmux not installed."
fi
