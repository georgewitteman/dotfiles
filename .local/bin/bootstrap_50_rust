#!/usr/bin/env zsh

set -e
source "$HOME/.zshrc"

if (( ! $+commands[rustup] )); then
  echo_eval 'curl --proto "=https" --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y --no-modify-path'
  echo_run source $HOME/.cargo/env
else
  echo_info "Rust is already installed."
  echo_run rustup update
fi

echo_eval "rustup completions zsh > $HOME/.config/zsh/completions/_rustup"
echo_eval "rustup completions zsh cargo > $HOME/.config/zsh/completions/_cargo"
