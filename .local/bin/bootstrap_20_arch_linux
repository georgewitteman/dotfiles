#!/usr/bin/env zsh

set -e
source "$HOME/.zshrc"

if (( ! $+commands[pacman] )); then
  echo_warn "The 'pacman' command is not available. Skipping arch"
  exit
fi

install_aur_package() {
  if command -v "$1" >/dev/null 2>&1; then
    echo_info "Already installed $1"
    return
  fi

  aur_install $1
}

echo_run sudo pacman -Syu

echo_run sudo pacman --sync --needed --noconfirm \
  alacritty \
  bashtop \
  ctags \
  docker \
  fd \
  firefox \
  fzf \
  git \
  glances \
  htop \
  jq \
  kubectl \
  lightdm \
  lightdm-gtk-greeter \
  minikube \
  noto-fonts-emoji \
  numlockx \
  ripgrep \
  terraform \
  tldr \
  tmux \
  vim \
  virtualbox \
  wget \
  wmctrl \
  xdg-utils \
  zsh \

install_aur_package yay
install_aur_package ytop

echo_run sudo systemctl enable lightdm.service
echo_run sudo systemctl enable docker.service
echo_run sudo usermod -aG docker $USER
