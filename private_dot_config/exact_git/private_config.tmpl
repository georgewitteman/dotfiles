# vim: ft=gitconfig
# This is Git's per-user configuration file.
[user]
	name = {{ .name | quote }}
	email = {{ .email | quote }}
	signingKey = {{ .gpgkey | quote }}
{{- if env "GITPOD_WORKSPACE_ID" }}
[credential]
	helper = /usr/bin/gp credential-helper
{{- end }}
[init]
	defaultBranch = main
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
[color]
	ui = true
[grep]
	lineNumber = true
[core]
	editor = vim
	# https://git-scm.com/docs/git-update-index#_untracked_cache
	untrackedCache = true
[diff]
	tool = vimdiff
	colorMoved = default
[merge]
	tool = vimdiff
	# https://blog.nilbus.com/take-the-pain-out-of-git-conflict-resolution-use-diff3/
	# https://stackoverflow.com/q/27417656
	conflictstyle = diff3
[difftool]
	prompt = 0
[push]
	# https://git-scm.com/docs/git-config#Documentation/git-config.txt-pushdefault
	default = simple
[pull]
	rebase = true
[commit]
{{- if (and (lookPath "gpg") (eq (output "sh" "-c" (cat "gpg --list-secret-keys " .gpgkey " >/dev/null 2>&1 || echo false")) "")) }}
	gpgsign = true
{{- end }}
[includeIf "gitdir:{{ .chezmoi.homeDir }}/*/"]
	path = ~/.config/git/personal
{{- if .is_work }}
[includeIf "gitdir:{{ .work.path }}/*/"]
	path = ~/.config/git/work
{{- end }}
