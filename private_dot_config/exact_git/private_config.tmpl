# vim: ft=gitconfig
# This is Git's per-user configuration file.
[user]
	name = {{ .name | quote }}
	email = {{ .email | quote }}
	signingKey = {{ .gpgkey | quote }}
{{- if env "GITPOD_WORKSPACE_ID" }}
[credential]
	helper = /usr/bin/gp credential-helper
{{- end }}
[init]
	defaultBranch = main
[core]
	# https://git-scm.com/docs/git-update-index#_untracked_cache
	untrackedCache = true
	# https://git-scm.com/docs/git-config#Documentation/git-config.txt-corehooksPath
	hooksPath = "~/.config/git/hooks"
[merge]
	# https://blog.nilbus.com/take-the-pain-out-of-git-conflict-resolution-use-diff3/
	# https://stackoverflow.com/q/27417656
	conflictstyle = diff3
[commit]
{{- if (and (lookPath "gpg") (eq (output "sh" "-c" (cat "gpg --list-secret-keys " .gpgkey " >/dev/null 2>&1 || echo false")) "")) }}
	gpgsign = true
{{- end }}
{{- if .is_work }}
[includeIf {{ .work.git_includeif | quote }}]
	path = ~/.config/git/work
{{- end }}
